<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dynamic and Static Linking | Security Research Blog</title>
    <meta name="description" content="We will take a quick look into the different types of linking of libraries to the ELF in x86 (linux). ## Linking: Linking - It is the process where something is...">
    <link href="/src/index.css" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github-dark.min.css" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <style>
        body { 
            background: linear-gradient(135deg, #0c0c0c 0%, #1a1a1a 100%);
            color: #e0e0e0;
        }
        .code-block {
            background: #1e1e1e;
            border: 1px solid #333;
            border-radius: 8px;
            padding: 1rem;
            overflow-x: auto;
            font-family: 'Courier New', monospace;
        }
        .gradient-text {
            background: linear-gradient(135deg, #f97316, #f59e0b);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        .video-embed { position: relative; padding-bottom: 56.25%; height: 0; overflow: hidden; border-radius: 8px; border: 1px solid #374151; background: #0f0f0f; margin: 1.5rem 0; }
        .video-embed iframe { position: absolute; top: 0; left: 0; width: 100%; height: 100%; }
        .toc-sidebar {
            position: fixed;
            top: 2rem;
            left: 1rem;
            max-height: calc(100vh - 4rem);
            overflow-y: auto;
            background: #1a1a1a;
            border: 1px solid #374151;
            border-radius: 0.75rem;
            padding: 1.5rem;
            margin-right: 0;
            width: 280px;
            flex-shrink: 0;
            z-index: 10;
        }
        .toc-title {
            font-size: 0.875rem;
            font-weight: 600;
            color: #9ca3af;
            text-transform: uppercase;
            letter-spacing: 0.05em;
            margin-bottom: 1rem;
            border-bottom: 1px solid #374151;
            padding-bottom: 0.5rem;
        }
        .toc-list {
            list-style: none;
            padding: 0;
            margin: 0;
        }
        .toc-sublist {
            list-style: none;
            padding-left: 0.5rem;
            margin-top: 0.25rem;
        }
        .toc-item {
            margin: 0.25rem 0;
        }
        .toc-level-2 {
            padding-left: 0.25rem;
        }
        .toc-level-3 {
            padding-left: 0.75rem;
        }
        .toc-level-4 {
            padding-left: 1.25rem;
        }
        .toc-link {
            display: block;
            color: #9ca3af;
            text-decoration: none;
            font-size: 0.875rem;
            line-height: 1.5;
            padding: 0.25rem 0;
            border-radius: 0.25rem;
            transition: all 0.2s;
        }
        .toc-link:hover {
            color: #60a5fa;
            background: #1f2937;
            padding-left: 0.5rem;
        }
        @media (max-width: 1024px) {
            .toc-sidebar {
                display: none;
            }
        }
        .prose h1 {
            background: linear-gradient(135deg, #f97316, #f59e0b); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;
            font-size: 2.5rem;
            font-weight: 800;
            margin-top: 3rem;
            margin-bottom: 1.5rem;
        }
        .prose h2 {
            background: linear-gradient(135deg, #f97316, #f59e0b); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;
            font-size: 2rem;
            font-weight: 700;
            margin-top: 3rem;
            margin-bottom: 1rem;
            border-bottom: 2px solid #374151;
            padding-bottom: 0.5rem;
        }
        .prose h3 {
            background: linear-gradient(135deg, #f97316, #f59e0b); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;
            font-size: 1.5rem;
            font-weight: 600;
            margin-top: 2rem;
            margin-bottom: 0.75rem;
        }
        .prose h4 {
            background: linear-gradient(135deg, #f97316, #f59e0b); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;
            font-size: 1.25rem;
            font-weight: 600;
            margin-top: 1.5rem;
            margin-bottom: 0.5rem;
        }
        .prose p {
            margin-bottom: 1.5rem;
            line-height: 1.7;
            color: #d1d5db;
        }
        .prose strong {
            color: #f3f4f6;
            font-weight: 600;
        }
        .prose code {
            background: #1e1e1e;
            color: #fbbf24;
            padding: 0.25rem 0.5rem;
            border-radius: 4px;
            font-family: 'Courier New', monospace;
            font-size: 0.9em;
        }
        .prose pre {
            background: #1e1e1e;
            border: 1px solid #333;
            border-radius: 8px;
            padding: 1.5rem;
            overflow-x: auto;
            margin: 2rem 0;
        }
        .prose pre code {
            background: transparent;
            color: #e5e7eb;
            padding: 0;
            border-radius: 0;
        }
        .prose blockquote {
          background:rgb(93, 45, 26);
          color:rgb(255, 255, 255);
          border-left: 4px solid #ff8c00;
          padding: 1rem 1.25rem;
          margin: 1.25rem 0;
          border-radius: calc(var(--radius) - 2px);
        }
        .prose ul, .prose ol {
            list-style-color: #ff8c00;
            list-style-type: disc;
            list-style-position: outside;
            margin: 1.5rem 0;
            padding-left: 2rem;
        }
        .prose li {
            margin: 0.5rem 0;
            color: #d1d5db;
        }
        .prose li::marker {
            color: #ff8c00 !important;
        }
        .prose ol li {
            list-style-type: decimal;
        }
            margin: 2rem 0;
            background: #1e1e1e;
            border-radius: 8px;
            overflow: hidden;
        }
        .prose th, .prose td {
            padding: 1rem;
            text-align: left;
            border-bottom: 1px solid #333;
        }
        .prose th {
            background: #2d2d2d;
            color: #f3f4f6;
            font-weight: 600;
        }
        .prose img {
            border-radius: 8px;
            margin: 2rem 0;
            max-width: 100%;
        }
        .prose hr {
            border: none;
            height: 2px;
            background: linear-gradient(90deg, transparent, #374151, transparent);
            margin: 3rem 0;
        }
        .prose a { color: rgb(3, 203, 146); text-decoration: underline; }
    </style>
</head>
<body class="min-h-screen">
    <div class="container mx-auto max-w-7xl px-4 sm:px-6 lg:px-4 py-8 relative">
        <header class="mb-12">
            <a href="/blogs" class="text-emerald-400 hover:text-emerald-300 mb-4 inline-block">← Back</a>
            <h1 class="text-4xl md:text-5xl font-bold mb-4">
                <span class="gradient-text">Dynamic and Static Linking</span>
            </h1>
            <div class="mb-8"><img src="/posts/Dynamic-and-Static-Linking/featured.png" alt="Dynamic and Static Linking cover image" class="w-full h-64 md:h-80 object-cover rounded-lg shadow" loading="eager"></div>
            <div class="flex items-center gap-4 text-sm text-gray-400 mb-6">
                <span>September 6, 2020</span>
                <span>•</span>
                <span>4 min read</span>
                <span>•</span>
                <div class="flex gap-2"><span class="bg-blue-500/20 text-blue-300 px-2 py-1 rounded text-xs">short-blog</span> <span class="bg-blue-500/20 text-blue-300 px-2 py-1 rounded text-xs">dynamic and static linking</span></div>
            </div>
        </header>

        <div class="flex flex-col lg:flex-row justify-start gap-6">
            <aside class="hidden lg:block"><nav class="toc-sidebar"><h3 class="toc-title">Table of Contents</h3><ul class="toc-list"><ul class="toc-sublist"><li class="toc-item toc-level-2"><a href="#linking" class="toc-link">Linking:</a></li><li class="toc-item toc-level-2"><a href="#sample-program" class="toc-link">sample program</a></li><li class="toc-item toc-level-2"><a href="#code-analysis" class="toc-link">Code Analysis</a></li><li class="toc-item toc-level-2"><a href="#pros-and-cons" class="toc-link">Pros and Cons</a></li><li class="toc-item toc-level-2"><a href="#dynamic-linking" class="toc-link">Dynamic Linking</a></li><li class="toc-item toc-level-2"><a href="#code-analysis" class="toc-link">Code Analysis</a></li><ul class="toc-sublist"><li class="toc-item toc-level-3"><a href="#steps" class="toc-link">steps</a></li></ul><li class="toc-item toc-level-2"><a href="#pros-and-cons" class="toc-link">Pros and Cons</a></li><li class="toc-item toc-level-2"><a href="#lazy-linking" class="toc-link">Lazy Linking</a></li><li class="toc-item toc-level-2"><a href="#reference" class="toc-link">Reference:</a></li></ul></ul></nav></aside>
            <article class="prose prose-invert max-w-none ml-0 lg:max-w-6xl lg:ml-10">
<p>We will take a quick look into the different types of linking of libraries to the ELF in x86 (linux).</p>
<!--more-->
<h2 id="linking">Linking:</h2>
<p>Linking - It is the process where something is being connected to something else. Suppose you call functions that is not defined in your binary and has to be used from some dependencies. There <strong>Linking</strong> comes into picture.</p>
<h2 id="sample-program">sample program</h2>
<pre><code class="c language-c">#include &lt;stdio.h&gt;
int main()
{
    printf("Hello World\n");
    printf("Welcome to my blog\n");
}
</code></pre>
<p>This will just print 2 strings to the terminal. Nothing intresting and complicated. Now let us compile this with static flag set.</p>
<pre><code>gcc --static test.c -o test
</code></pre>
<h2 id="code-analysis">Code Analysis</h2>
<p>Now this is statically compiled. Let us try to analyse the code and see how the printf function is called.</p>
<ul>
<li>note: Printf is a libc function, which means it is not included in the binary and is been imported from a external dependency.</li>
</ul>
<p>so open gdb and disassembly main<br />
<img src="/images/dynamic_and_static_linking/main.png" alt="" /></p>
<p>We can see that there is a normal puts. Do you remember we used printf in our function. This means the compiler plays god and decides the best function to be used in that place. Since puts is more efficient than printf it was implemented there. Instead when you use format strings in printf then puts cant be implemented in that case.<br />
set a break point at puts and run the program.<br />
<img src="/images/dynamic_and_static_linking/main1.png" alt="" /></p>
<p>So now we see we go into the function puts. which has an address <code>0x4118c0</code>. Now is this address kinda giving you an idea ? Yup ! This is our binary. If we do a vmmap (virtual memory mapping) then we can see that the address from <code>0x00400000</code> to <code>0x004e7000</code> are inside the binary. Now we can say that the puts function is inside the binary so its address is also known at runtime. </p>
<h2 id="pros-and-cons">Pros and Cons</h2>
<table>
<thead>
<tr>
<th style="text-align:center;">Advantage</th>
<th style="text-align:center;">disadvantage</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center;">Anybody having the binary can excecute it. There will be no dependency errors</td>
<td style="text-align:center;">In real Life the applications are pretty huge and need multiple dependency files. Combining all of them into one file will make the size of the binary pretty huge.</td>
</tr>
</tbody>
</table>
<h2 id="dynamic-linking">Dynamic Linking</h2>
<p>Time to move on to the complicated stuff. To compile it as dynamic, you have to do a normal gcc compilation as GCC compiles everything into Dynamic linking by default.</p>
<pre><code>gcc test.c -o test
</code></pre>
<h2 id="code-analysis-1">Code Analysis</h2>
<p>We know for a fact that the functions are not going to be inside our binary. The binary being smart will store the names of dependencies that our needed to excecute this file.</p>
<blockquote>
  <p>Mr. Dynamic Linker</p>
</blockquote>
<p>The Dynamic Linker will link all the dependencies to the binary.</p>
<p>First before excecuting the elf the system will excecute interpreter, which is a program that sets up the environment for excecuting the binary, this is done with the help of .dynamic section.<br />
This program (interpreter) lies in the pt_interp segment which is created by the ld (compile-time linker). </p>
<pre><code>readelf -d test
</code></pre>
<p><img src="/images/dynamic_and_static_linking/main3.png" alt="" /></p>
<ul>
<li>NEEDED : contains the names of all the dependencies.</li>
<li>DT_SYMTAB : Address of the dynamic symbol table. <br />
so on…</li>
</ul>
<h3 id="steps">steps</h3>
<ul>
<li>First the dynamic linker will load the excecutable into memory.</li>
<li>Next will load the dependencies which are mentioned in the binary.</li>
<li>Relocation - shared libraries are loaded into non-deterministic addresses.</li>
<li>then do some initialisation and go back to binary's entry point / starting point</li>
</ul>
<p><img src="/images/dynamic_and_static_linking/main5.png" alt="" /></p>
<h2 id="pros-and-cons-1">Pros and Cons</h2>
<table>
<thead>
<tr>
<th style="text-align:center;">Advantage</th>
<th style="text-align:center;">disadvantage</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center;">People only need to have the dependencies installed once, that can be used for other binaries as well.</td>
<td style="text-align:center;">People who dont have the correct dependency will face a lot of problems(finding them).</td>
</tr>
</tbody>
</table>
<h2 id="lazy-linking">Lazy Linking</h2>
<p>Oops ! did I say that the linker performs all relocations. Well, thats not the case for most situations. This is where lazy linking comes into picture. So if a function is called then the dynamic linker will resolve the address for the function. Hence the name "Lazy" Linking. This awesome work is done by the GOT and PLT. (Next blog)</p>
<h2 id="reference">Reference:</h2>
<p>Really cool blog which made me understand this concept.<br />
<a href="https://www.intezer.com/blog/elf/executable-linkable-format-101-part-4-dynamic-linking/">intezer</a></p>
            </article>
        </div>
        <!-- Navigation -->
        <nav class="mt-16 pt-8 border-t border-gray-700">
            <div class="flex justify-between items-center">
                <div class="flex-1">
                    <a href="/posts/Executable-and-Linkable-Format-Sections-and-Segments.html" class="inline-flex items-center text-emerald-400 hover:text-emerald-300 transition-colors">
                        <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
                        </svg>
                        <div class="text-left">
                            <div class="text-xs text-gray-400">Previous</div>
                            <div class="font-medium">Executable and Linkable Format - Sections and Segments</div>
                        </div>
                    </a>
                </div>
                <div class="flex-1 text-center">
                    <a href="/blogs" class="text-emerald-400 hover:text-emerald-300 transition-colors font-medium">All Posts</a>
                </div>
                <div class="flex-1 text-right">
                    <a href="/posts/Global-Offset-Table-and-Procedure-Linkage-Table.html" class="inline-flex items-center text-emerald-400 hover:text-emerald-300 transition-colors">
                        <div class="text-right">
                            <div class="text-xs text-gray-400">Next</div>
                            <div class="font-medium">Global Offset Table and Procedure Linkage Table</div>
                        </div>
                        <svg class="w-4 h-4 ml-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
                        </svg>
                    </a>
                </div>
            </div>
        </nav>
        </nav>
    </div>
<script>window.addEventListener('DOMContentLoaded',()=>{try{document.querySelectorAll('pre code').forEach((el)=>window.hljs&&window.hljs.highlightElement(el));}catch(e){console.warn('hljs init failed',e);}});</script>
</body>
</html>